# Roadmap and Todos

## Roadmap

### Plug-in system
Do we want to implement a plug-in system, so that 3rd parties can create plug-ins without changing the 'core' of the mach framework? Or perhaps even create plugins for the services we support (sentry, aws, azure, contentful, commercetools, serverless components, etc).

#### MACH version tracking
Implement **'versie'**-like service to keep track of all available components, their versions and usages.

This would also facilite a `mach update` functionality

#### Staging deployments
Think about how we are going to deal with staging/acceptance environments


#### Facilitate local development
The composer could assist in local development for example by;

- Starting [ngrok](https://ngrok.com/) processes to local microservice processes and configure them in commercetools
- Start Azurite to mock an Azure environment
- Add a `generate component` cookiecutter-like command to bootstrap a new component 


#### Let MACH prepare Terraform state backend
Include a Terraform template to bootstrap a Terraform state backend for you.


## TODOs
- Improve/rewrite the `mach update` method; it now relies on the GitLab API. Should be either;
    - cloning the repo and getting the info from the *git log*
    - use [MACH version tracking](#mach-version-tracking)
- Improve componentn versioning itself; it is now based on a commit hash. This makes it unclear if a change means a down- or upgrade
- Output a `terraform plan` summary so that changes can be reviewed.  
  For example; if a minor change results in the removal of several resources, the developer knows something is wrong and can cancel the deployment.  
  At this moment there is no safe-guard for this.
- Dont refer to the `/terraform` subdirectory in component definitions; MACH will detect it automatically (and if absent should raise an error).  
  It makes it more logical / simple to detect certain patterns like; `terraform`, `dashboard` or any other MACH integration that a component can define
- Add versioning (and CHANGELOG) of the MACH composer CLI itself
- Can we keep the component serverless function environment variables more simple? There is quite a lot of 'boilerplate' at the moment. See what we can omit and what can be automatically generated by MACH
- Check if site.azure.frontdoor is set when a public API component is detected
- Support converting non-localized strings to localized strings to simplify configuration file
- Revisit discussion about secrets filled in on the main.yml or fill in on Azure Portal.
- Add optional encryption (f.e. using sops https://github.com/mozilla/sops/ and integrate it with Azure Key Vault in shared rg)
- Let MACH generate azurerm_key_vault_access_policy for service_object_ids if a component exposes the keyvault ID in its Terraform output - reduces required variables for a component